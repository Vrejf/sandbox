(() => { var t = { 293: () => { function t(t) { const e = { thisUrl: new URL(window.location.href), wfSiteId: document.querySelector("html").dataset.wfSite, wfUrl: new URL(document.querySelector("html").dataset.wfSite, "https://webflow.com/api/v1/form/"), counterUrl: "https://utils-api-git-experimental-vrejf.vercel.app/api/counter/", niceUtms: Array.from(new URLSearchParams(window.location.search), (([t, e]) => `${t}: ${e}`)), redirect: t.getAttribute("redirect") || !1, endpoint: t.getAttribute("action") ? new URL(t.getAttribute("action")).toString() : null, addUtm: Boolean(t.dataset.redirectUtm) || !0, utmSource: new URLSearchParams(window.location.search).get("utm_source") || new URLSearchParams(window.location.search).get("source"), submitButton: t.querySelector('input[type="submit"]') || void 0 }; e.submitText = e.submitButton && e.submitButton.value || ""; const o = { baseData: { url: e.endpoint, method: "POST", headers: { "Content-Type": "application/json" } }, webFlow(t) { console.log("preppar data för webflow"); const n = new FormData(t); n.append("UTM", e.niceUtms); const r = new URLSearchParams({ name: t.getAttribute("name"), source: window.location.href }); for (const t of n.entries()) { const e = `fields[${t[0]}]`; r.append(e, t[1]) } return { ...o.baseData, url: e.wfUrl.href, headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: r.toString() } }, mailChimp(t) { console.log("preppar data för mailchimp"); const n = new FormData(t), r = new URLSearchParams(n); return r.append("UTM", e.niceUtms), { ...o.baseData, url: e.endpoint.replace("post?", "post-json?") + "&c=?", headers: { "Content-Type": "application/x-www-form-urlencoded" }, dataType: "jsonp", body: r.toString() } }, zapier: t => ({ ...o.baseData, body: JSON.stringify({ [t.getAttribute("name")]: Object.fromEntries(new FormData(t)), source: e.thisUrl.hostname + e.thisUrl.pathname, time: (new Date).toISOString(), UTM: e.niceUtms }) }), counter: t => ({ ...o.baseData, url: new URL(t, e.counterUrl.toString()), body: JSON.stringify({ name: "default", site: e.wfSiteId }) }), actionNetwork(t) { const n = new FormData(t); return { ...o.baseData, body: JSON.stringify({ person: { given_name: n.get("first"), family_name: n.get("last"), email_addresses: [{ address: n.get("email_address") }], phone_numbers: [{ number: n.get("phone_number") || "" }], postal_addresses: [{ postal_code: n.get("postal_code") || "", address_lines: n.get("address") || "", region: n.get("region") || "", country: n.get("country") || "" }] }, add_tags: [n.getAll("tags") || ""], "action_network:referrer_data": { source: e.utmSource ? e.utmSource.toString() : "", website: e.thisUrl.hostname + e.thisUrl.pathname } }) } } }; function n(t, o) { const n = t.parentNode, r = n.querySelector(".w-form-done"), a = n.querySelector(".w-form-fail"); o ? (r.style.display = "block", a.style.display = "none") : (r.style.display = "none", a.style.display = "block", e.submitButton.value = e.submitText) } return { handleForm: async function (t) { const r = t.dataset.crm.toLowerCase(); t.addEventListener("submit", (async function (a) { a.preventDefault(), a.stopPropagation(), e.submitButton.value = e.submitButton.dataset.wait || "Sending..."; let c = []; const i = { webflow: "webFlow", actionnetwork: "actionNetwork", mailchimp: "mailChimp", zapier: "zapier" }, s = t.dataset.counterUpdate; if (i.hasOwnProperty(r) && e.endpoint) { const e = i[r]; c.push(o[e](t)) } else console.log("no crm defined"), c.push(o.webFlow(t)); s && "default" !== s && c.push(o.counter(s)), c.length > 0 && await async function (t, o) { try { const r = t.map((async t => { if (!t.dataType) { const e = await fetch(t.url, { method: t.method, headers: t.headers, body: t.body }); if (!e.ok) throw n(o, !1), new Error("Response error"); return e.json() } if ("jsonp" === t.dataType) return await async function (t) { try { return await $.ajax({ url: t.url, type: t.method, headers: t.headers, data: t.body, dataType: t.dataType }) } catch (t) { throw console.error(t), new Error(t) } }(t) })); await Promise.all(r), n(o, !0), function () { if (e.redirect) if (console.log("Redirecting..."), e.addUtm) { const t = new URL(e.redirect, e.thisUrl), o = new URLSearchParams(window.location.search); t.searchParams.forEach(((t, e) => { o.has(e) || o.set(e, t) })); const n = t.origin + t.pathname + (o.toString() ? "?" + o.toString() : ""); window.location.href = n } else window.location.href = e.redirect; else console.log("No redirect defined") }() } catch (t) { n(o, !1), console.error("An error occurred:", t) } }(c, t) })) } } } document.addEventListener("DOMContentLoaded", (function () { const e = document.querySelectorAll("[data-crm]"); for (let o of e) t(o).handleForm(o) })) }, 555: () => { function t() { function t(t, e, o) { t.style.width = function (t, e) { return t >= e ? 100 : Math.round(t / e * 100) }(e, o) + "%" } function e(t, e, o) { try { const n = new Intl.NumberFormat(o.locale, o.compactDisplay).format(e); t.textContent = n } catch { o.compactDisplay.useGrouping = !1; const n = new Intl.NumberFormat(void 0, o.compactDisplay).format(e); t.textContent = n } } function o(t, e, o) { e >= o.hideBelow && (t.style.opacity = 1) } return { processCounterElement: async function (n) { const r = n.dataset.counterName || "default", a = { target: n.dataset.counterTarget || 0, hideBelow: n.dataset.counterHideBelow || 0, autoTarget: n.dataset.counterAutoTarget || !0, locale: n.dataset.counterLocale || document.documentElement.lang || "undefined", compact: n.dataset.counterCompact || !1, compactDisplay: { notation: void 0 === n.dataset.counterCompact ? "standard" : "compact" } }; let c; if (c = "default" === r.toLowerCase() ? 125 : await async function (t) { console.log("fetching..."); const e = new URL(t, "https://utils-api-git-experimental-vrejf.vercel.app/api/counter/"); try { let t; const o = await fetch(e); return o.ok || (t = await o.json(), console.log(t), console.log(o.statusText)), t = await o.json(), Number.isInteger(t.count) ? t.count : (console.log("Count not Int"), console.log(t), 0) } catch (t) { return console.log("Catch error: ", t), 0 } }(r), n.classList.contains("counter-current-value")) e(n, c, a), o(n, c, a); else { const t = n.querySelectorAll(".counter-current-value"); for (let n of t) e(n, c, a), o(n, c, a) } const i = function (t, e) { return 1.05 * t < e.target || !e.autoTarget ? e.target : function (t) { const e = { 350: 50, 500: 100, 2e3: 250, 5e3: 500, 2e4: 2500, 5e4: 5e3, 1e5: 1e4, 2e5: 25e3, 5e5: 5e4, 1e6: 1e5 }; let o = Object.keys(e).find((e => e >= t)), n = o ? e[o] : 25e4; return Math.ceil(1.05 * t / n) * n }(t) }(c, a), s = n.querySelectorAll(".counter-target-value"); for (let t of s) e(t, i, a), o(t, c, a); let l = n.querySelectorAll(".counterbar-limiter"); for (let e of l) t(e, c, i); o(n, c, a) } } } !function () { { const t = "\n        .counter-target-value,\n        .counter-current-value,\n        .container_counter {\n            opacity: 0;\n            transition: opacity 0.7s;\n        }\n    ", e = document.createElement("style"); e.textContent = t, document.head.appendChild(e) } document.addEventListener("DOMContentLoaded", (function () { const e = document.querySelectorAll("[data-counter-name]"), o = t(); for (let t of e) o.processCounterElement(t) })) }() }, 868: () => { document.addEventListener("DOMContentLoaded", (function () { const t = document.querySelectorAll('[data-form-forward="true"]'), e = document.querySelectorAll('[data-load-forward="true"]'); t.length > 0 && t.forEach((function (t) { console.log("Forward this form:" + t.getAttribute("id")), function (t) { const e = new URLSearchParams(window.location.search), o = []; e.forEach(((t, e) => { o.push(`${e}: ${t}`) })), localStorage.removeItem("multistepforward"); const n = t.getAttribute("redirect"), r = n + (n.includes("?") ? "&" : "?") + e.toString(); function a(t) { let e = new FormData(t); const n = o.join(", "); e.set("utm", n), localStorage.setItem("multistepforward", JSON.stringify(Object.fromEntries(e))) } t.setAttribute("redirect", r), t.setAttribute("data-redirect", r), t.addEventListener("change", (e => { a(t) })), t.addEventListener("input", (e => { a(t) })) }(t) })), e.length > 0 && null !== localStorage && (e.forEach((function (t) { console.log("Load data for this form: " + t.getAttribute("id")); const e = JSON.parse(localStorage.getItem("multistepforward")); !function (t, e) { e.forEach((([e, o]) => { const n = `<input type="hidden" id="${e}" name="${e}" value="${document.createTextNode(o).textContent}">`; t.insertAdjacentHTML("afterbegin", n) })); const o = new URLSearchParams(window.location.search).toString(), n = t.getAttribute("redirect"); if (n) { const e = n + (n.includes("?") ? "&" : "?") + o.toString(); t.setAttribute("redirect", e), t.setAttribute("data-redirect", e) } t.querySelectorAll("input[data-redirect]").forEach((t => { const e = t.getAttribute("data-redirect"), n = e + (e.includes("?") ? "&" : "?") + o.toString(); t.setAttribute("data-redirect", n) })) }(t, Object.entries(e)) })), localStorage.removeItem("multistepforward")) })) } }, e = {}; function o(n) { var r = e[n]; if (void 0 !== r) return r.exports; var a = e[n] = { exports: {} }; return t[n](a, a.exports, o), a.exports } o.n = t => { var e = t && t.__esModule ? () => t.default : () => t; return o.d(e, { a: e }), e }, o.d = (t, e) => { for (var n in e) o.o(e, n) && !o.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: e[n] }) }, o.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e), (() => { "use strict"; o(293), o(555), o(868), console.log("agera-sync.0.0.3.js"), console.log("counter-lib.0.1.6.js"), console.log("multistep-forward.0.4.js") })() })();